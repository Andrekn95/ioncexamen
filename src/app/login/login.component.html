<ion-content class="login-background">
  <div class="ion-padding">
    <ion-card class="login-card">
      <ion-card-header>
        <ion-card-title class="ion-text-center">Inicio de Sesión</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <!-- Campo de correo -->
          <ion-item>
            <ion-label position="floating">Ingrese su Correo</ion-label>
            <ion-input
              type="email"
              formControlName="username"
              placeholder="ejemplo@yavirac.edu.ec">
            </ion-input>
          </ion-item>

          @if (username?.touched || username?.dirty) {
            @if (username?.errors?.['required']) {
              <ion-text color="danger"><p>El correo es obligatorio.</p></ion-text>
            }
            @else if (username?.errors?.['email']) {
              <ion-text color="danger"><p>Debe ingresar un correo válido.</p></ion-text>
            }
            @else if (username?.errors?.['pattern']) {
              <ion-text color="danger"><p>El correo debe terminar en @yavirac.edu.ec.</p></ion-text>
            }
          }

          <!-- Campo de contraseña -->
          <ion-item>
            <ion-label position="floating">Contraseña</ion-label>
            <ion-input
              type="password"
              formControlName="password"
              placeholder="Ingrese su contraseña">
            </ion-input>
          </ion-item>

          @if (password?.touched || password?.dirty) {
            @if (password?.errors?.['required']) {
              <ion-text color="danger"><p>La contraseña es obligatoria.</p></ion-text>
            }
            @else if (password?.errors?.['minlength']) {
              <ion-text color="danger"><p>Debe tener al menos 6 caracteres.</p></ion-text>
            }
          }

          <!-- Botón de enviar -->
          <ion-button 
            type="submit"
            expand="block"
            color="primary"
            [disabled]="loginForm.invalid">
            Iniciar sesión
          </ion-button>

          @if (mensaje) {
            <ion-text [color]="mensajeColor" class="ion-text-center ion-margin-top">
              <p>{{ mensaje }}</p>
            </ion-text>
          }

          <!-- Sección inferior -->
          <ion-row class="ion-margin-top">
            <ion-col size="6" class="ion-text-start">
              <ion-button 
                routerLink="/form"
                style="--background: #4caf50; --color: white; 
                       --padding-top: 16px; --padding-bottom: 16px; 
                       font-size: 18px;">
                Registrarse
              </ion-button>
            </ion-col>

            <ion-col size="6" class="ion-text-end">
              <ion-button
                style="--background: #4f32f7; --color: white; 
                       --padding-top: 2px; --padding-bottom: 10px; 
                       font-size: 20px;">
                Recuperar contraseña
              </ion-button>
            </ion-col>
          </ion-row>
        </form>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
